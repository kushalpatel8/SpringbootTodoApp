<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Todo Application</title>

    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@100..900&display=swap"
          rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
          rel="stylesheet">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<div class="todo-container">
    <h4>
        <i class="bi bi-calendar-check"></i> To-Do List
    </h4>

    <!-- ADD TASK -->
    <form th:action="@{/add}" method="post" class="d-flex mb-4 mt-4">
        <input type="text"
               name="title"
               placeholder="Add your task"
               class="form-control todo-input"
               required>
        <button type="submit" class="btn btn-add">ADD <span>+</span></button>
    </form>

    <!-- EMPTY STATE -->
    <div th:if="${todos == null or todos.isEmpty()}"
         class="text-center text-muted">
        No todo Found
    </div>

    <!-- TODO LIST -->
    <div class="todo-list"
         th:if="${todos != null and !todos.isEmpty()}">

        <div th:each="todo : ${todos}" class="todo-item">

            <div class="d-flex align-items-center">

                <!-- COMPLETE / UNCOMPLETE -->
                <a th:href="@{/toggle/{id}(id=${todo.id})}">
                    <i class="bi"
                       th:classappend="${todo.completed}
                       ? 'bi-check-circle-fill check-icon'
                       : 'bi-circle unchecked-icon'">
                    </i>
                </a>

                <span class="todo-text"
                      th:text="${todo.title}"
                      th:classappend="${todo.completed} ? 'completed' : ''">
                </span>
            </div>

            <!-- DELETE -->
            <a th:href="@{/delete/{id}(id=${todo.id})}" class="delete-btn">
                <i class="bi bi-trash3"></i>
            </a>


        </div>
    </div>
</div>

</body>
</html>
